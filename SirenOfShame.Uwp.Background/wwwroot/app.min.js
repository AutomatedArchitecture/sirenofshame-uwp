var __decorate=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=3>i?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(3>i?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},__metadata=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0};System.register("server.service",["@angular/core"],function(t,e){"use strict";{var n,o;e&&e.id}return{setters:[function(t){n=t}],execute:function(){o=function(){function t(){var t=this;if(this.connected=new n.EventEmitter(!0),this.connectionError=new n.EventEmitter(!0),"WebSocket"in window){var e=this.getUrl(),o=new WebSocket(e,["echo"]);o.onopen=function(){t.ws=o,t.ws.onmessage=function(e){var n=JSON.parse(e.data);return"echoResult"===n.type?void t.onMessage(n.result):void("getSirenInfoResult"===n.type&&t.onGetSirenInfo(n.result))},t.connected.emit(null)},o.onerror=function(){t.connectionError.emit("Error connecting via websockets.")}}else this.connectionError.emit("This browser does not support websockets")}return t.prototype.getUrl=function(){var t=":8001",e=location.hostname;return"ws://"+e+t+"/sockets/"},t.prototype.send=function(t,e){this.ws?this.ws.send(JSON.stringify(t)):e&&e("not initialized yet")},t.prototype.echo=function(t){var e=this;return new Promise(function(n,o){e.onMessage=function(t){return n(t)};var r={type:"echo",message:t};e.send(r,o)})},t.prototype.getSirenInfo=function(){var t=this;return new Promise(function(e,n){t.onGetSirenInfo=function(t){return e(t)};var o={type:"getSirenInfo"};t.send(o,n)})},t.prototype.playLedPattern=function(t){var e={type:"playLedPattern",id:t};this.send(e)},__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],t.prototype,"connected",void 0),__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],t.prototype,"connectionError",void 0),t=__decorate([n.Injectable(),__metadata("design:paramtypes",[])],t)}(),t("ServerService",o)}}}),System.register("show-off.component",["@angular/core","rxjs/add/operator/toPromise","server.service"],function(t,e){"use strict";{var n,o,r;e&&e.id}return{setters:[function(t){n=t},function(t){},function(t){o=t}],execute:function(){r=function(){function t(t){var e=this;this.serverService=t,t.getSirenInfo().then(function(t){e.ledPatterns=t.ledPatterns,e.audioPatterns=t.audioPatterns})}return t.prototype.playLights=function(t){this.serverService.playLedPattern(t)},t.prototype.stopLights=function(){this.serverService.playLedPattern(null)},t=__decorate([n.Component({template:'\n<h1>Show Off</h1>\n<form class="form-horizontal">\n    <div class="form-group">\n        <label for="ledPattern" class="col-sm-2 control-label">LED Pattern</label>\n        <div class="col-sm-10">\n            <select id="ledPattern" class="form-control" #selectedLedPattern>\n                <option *ngFor="let pattern of ledPatterns" [value]="pattern.id">{{pattern.name}}</option>\n            </select>\n        </div>\n    </div>\n    <div class="form-group">\n        <div class="col-sm-offset-2 col-sm-10">\n            <button type="submit" class="btn btn-primary" (click)="playLights(selectedLedPattern.value)">Play Lights</button>\n            <button type="submit" class="btn btn-primary" (click)="stopLights()">Stop Lights</button>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="audioPattern" class="col-sm-2 control-label">Audio Pattern</label>\n        <div class="col-sm-10">\n            <select id="audioPattern" class="form-control">\n                <option *ngFor="let pattern of audioPatterns" [value]="pattern.id">{{pattern.name}}</option>\n            </select>\n        </div>\n    </div>\n</form>\n'}),__metadata("design:paramtypes",[o.ServerService])],t)}(),t("ShowOff",r)}}}),System.register("home.component",["@angular/core","server.service"],function(t,e){"use strict";{var n,o,r;e&&e.id}return{setters:[function(t){n=t},function(t){o=t}],execute:function(){r=function(){function t(t){var e=this;this.serverService=t,this.connectionStatus="Connecting to server ...",t.connected.subscribe(function(){return e.connectionStatus=null}),t.connectionError.subscribe(function(t){return e.connectionStatus=t})}return t.prototype.onButtonClick=function(){var t=this;this.serverService.echo(this.message).then(function(e){return t.messages+=e},function(t){return alert(t)})},t.prototype.ngOnInit=function(){this.messages=""},t=__decorate([n.Component({template:'\n    <h1>Siren of Shame</h1>\n    <h2>Messages</h2>\n    <div>{{messages}}</div>\n    <h2 *ngIf="connectionStatus">Status</h2>\n    <div *ngIf="connectionStatus">{{connectionStatus}}</div>\n    <h2>Send</h2>\n    <input type="text" [(ngModel)]="message" />\n    <button type="submit" (click)="onButtonClick()">Send</button>\n'}),__metadata("design:paramtypes",[o.ServerService])],t)}(),t("Home",r)}}}),System.register("app",["@angular/core","@angular/router","show-off.component","home.component","server.service"],function(t,e){"use strict";{var n,o,r,i,s,c;e&&e.id}return{setters:[function(t){n=t},function(t){o=t},function(t){r=t},function(t){i=t},function(t){s=t}],execute:function(){c=function(){function t(t){this.router=t,this.setCurrentUrl()}return t.prototype.setCurrentUrl=function(){var t=this.router.serializeUrl(this.router.urlTree);this.currentUrl=t?t:"/"},t.prototype.gotoHome=function(){this.router.navigate(["/"]),this.setCurrentUrl()},t.prototype.gotoShowOff=function(){this.router.navigate(["showoff"]),this.setCurrentUrl()},t=__decorate([n.Component({selector:"my-app",templateUrl:"components/app.html",providers:[s.ServerService],directives:[o.ROUTER_DIRECTIVES]}),o.Routes([new o.Route({path:"/",component:i.Home}),new o.Route({path:"/dist",component:i.Home}),new o.Route({path:"/showoff",component:r.ShowOff}),new o.Route({path:"/dist/showoff",component:r.ShowOff})]),__metadata("design:paramtypes",[o.Router])],t)}(),t("AppComponent",c)}}}),System.register("boot",["@angular/platform-browser-dynamic","app","@angular/router"],function(t,e){"use strict";{var n,o,r;e&&e.id}return{setters:[function(t){n=t},function(t){o=t},function(t){r=t}],execute:function(){n.bootstrap(o.AppComponent,[r.ROUTER_PROVIDERS])["catch"](function(t){return console.error(t)})}}});