var __decorate=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=3>i?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(3>i?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};System.register("server.service",["@angular/core"],function(e,t){"use strict";{var n,o;t&&t.id}return{setters:[function(e){n=e}],execute:function(){o=function(){function e(){this.commands=[],this.connected=new n.EventEmitter(!0),this.connectionError=new n.EventEmitter(!0),this.deviceConnectionChanged=new n.EventEmitter(!0),this.isConnected=!1,"WebSocket"in window?this.connectToServer():this.connectionError.emit("This browser does not support websockets")}return e.prototype.registerCommand=function(e){this.commands.push(e)},e.prototype.connectToServer=function(){var e=this,t=this.getUrl(),n=new WebSocket(t,["echo"]);n.onopen=function(){e.isConnected=!0,e.ws=n,e.ws.onmessage=function(t){var n=JSON.parse(t.data);e.commands.forEach(function(e){return e.type===n.type?void e.response(n):void 0}),"deviceConnectionChanged"===n.type&&(200===n.responseCode?e.deviceConnectionChanged.emit(n.result):console.error(n.result))},e.connected.emit(null)},n.onerror=function(){e.isConnected=!1,e.connectionError.emit("Error connecting via websockets.")},n.onclose=function(){e.isConnected=!1,e.connectionError.emit("Lost connection to server, attempting to reconnect."),e.connectToServer()}},e.prototype.getUrl=function(){var e=":8001",t=location.hostname;return"ws://"+t+e+"/sockets/"},e.prototype.send=function(e,t){var n=this;if(this.ws&&this.isConnected)this.ws.send(JSON.stringify(e));else var o=this.connected.subscribe(function(){n.ws.send(JSON.stringify(e)),o.unsubscribe()})},__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],e.prototype,"connected",void 0),__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],e.prototype,"connectionError",void 0),__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],e.prototype,"deviceConnectionChanged",void 0),e=__decorate([n.Injectable(),__metadata("design:paramtypes",[])],e)}(),e("ServerService",o)}}}),System.register("commands/base.command",[],function(e,t){"use strict";{var n;t&&t.id}return{setters:[],execute:function(){n=function(){function e(e){this.serverService=e}return Object.defineProperty(e.prototype,"type",{get:function(){return null},enumerable:!0,configurable:!0}),e}(),e("BaseCommand",n)}}}),System.register("commands/get-siren-info.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"getSirenInfo"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.getSirenInfo=function(){var e=this;return new Promise(function(t,n){e.response=function(e){return t(e.result)};var o={type:"getSirenInfo"};e.serverService.send(o,n)})},t.prototype.playLedPattern=function(e){var t={type:"playLedPattern",id:e};this.serverService.send(t)},t.prototype.playAudioPattern=function(e){var t={type:"playAudioPattern",id:e};this.serverService.send(t)},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("GetSirenInfoCommand",i)}}}),System.register("show-off.component",["@angular/core","rxjs/add/operator/toPromise","commands/get-siren-info.command"],function(e,t){"use strict";{var n,o,r;t&&t.id}return{setters:[function(e){n=e},function(e){},function(e){o=e}],execute:function(){r=function(){function e(e){var t=this;this.getSirenInfoCommand=e,e.getSirenInfo().then(function(e){t.ledPatterns=e.ledPatterns,t.audioPatterns=e.audioPatterns})}return e.prototype.playLights=function(e){this.getSirenInfoCommand.playLedPattern(e)},e.prototype.stopLights=function(){this.getSirenInfoCommand.playLedPattern(null)},e.prototype.playAudio=function(e){this.getSirenInfoCommand.playAudioPattern(e)},e.prototype.stopAudio=function(){this.getSirenInfoCommand.playAudioPattern(null)},e=__decorate([n.Component({template:'\n<h1>Show Off</h1>\n<form class="form-horizontal">\n    <div class="form-group">\n        <label for="ledPattern" class="col-sm-2 control-label">LED Pattern</label>\n        <div class="col-sm-10">\n            <select id="ledPattern" class="form-control" #selectedLedPattern>\n                <option *ngFor="let pattern of ledPatterns" [value]="pattern.id">{{pattern.name}}</option>\n            </select>\n        </div>\n    </div>\n    <div class="form-group">\n        <div class="col-sm-offset-2 col-sm-10">\n            <button type="submit" class="btn btn-primary" (click)="playLights(selectedLedPattern.value)">Play Lights</button>\n            <button type="submit" class="btn btn-primary" (click)="stopLights()">Stop Lights</button>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="audioPattern" class="col-sm-2 control-label">Audio Pattern</label>\n        <div class="col-sm-10">\n            <select id="audioPattern" class="form-control">\n                <option *ngFor="let pattern of audioPatterns" [value]="pattern.id">{{pattern.name}}</option>\n            </select>\n        </div>\n    </div>\n    <div class="form-group">\n        <div class="col-sm-offset-2 col-sm-10">\n            <button type="submit" class="btn btn-primary" (click)="playAudio(selectedLedPattern.value)">Play Audio</button>\n            <button type="submit" class="btn btn-primary" (click)="stopAudio()">Stop Audio</button>\n        </div>\n    </div>\n</form>\n'}),__metadata("design:paramtypes",[o.GetSirenInfoCommand])],e)}(),e("ShowOff",r)}}}),System.register("commands/echo.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"echo"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.echo=function(e){var t=this;return new Promise(function(n,o){t.response=function(e){return n(e.result)};var r={type:"echo",message:e};t.serverService.send(r,o)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("EchoCommand",i)}}}),System.register("home.component",["@angular/core","commands/echo.command"],function(e,t){"use strict";{var n,o,r;t&&t.id}return{setters:[function(e){n=e},function(e){o=e}],execute:function(){r=function(){function e(e){this.echoCommand=e}return e.prototype.onButtonClick=function(){var e=this;this.echoCommand.echo(this.message).then(function(t){return e.messages+=t},function(e){return alert(e)})},e.prototype.ngOnInit=function(){this.messages=""},e=__decorate([n.Component({template:'\n    <h1>Siren of Shame</h1>\n    <h2>Messages</h2>\n    <div>{{messages}}</div>\n    <h2>Send</h2>\n    <input type="text" [(ngModel)]="message" />\n    <button type="submit" (click)="onButtonClick()">Send</button>\n'}),__metadata("design:paramtypes",[o.EchoCommand])],e)}(),e("Home",r)}}}),System.register("models/ciServer",[],function(e,t){"use strict";{var n;t&&t.id}return{setters:[],execute:function(){n=function(){function e(){}return e}(),e("CiServer",n)}}}),System.register("models/myBuildDefinition",[],function(e,t){"use strict";{var n;t&&t.id}return{setters:[],execute:function(){n=function(){function e(){}return e}(),e("MyBuildDefinition",n)}}}),System.register("commands/get-builddefinitions.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"getBuildDefinitions"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.getBuildDefinitions=function(e){var t=this;return new Promise(function(n,o){t.response=function(e){200===e.responseCode?n(e.result):o(e.result)};var r={type:"getBuildDefinitions",ciServer:e};t.serverService.send(r,o)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("GetBuildDefinitionsCommand",i)}}}),System.register("models/ciEntryPointSetting",[],function(e,t){"use strict";{var n;t&&t.id}return{setters:[],execute:function(){n=function(){function e(){}return e}(),e("CiEntryPointSetting",n)}}}),System.register("commands/get-cientrypointsetting.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"getCiEntryPointSetting"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.invoke=function(e){var t=this;return new Promise(function(n,o){t.response=function(e){200===e.responseCode?n(e.result):o(e.result)};var r={type:"getCiEntryPointSetting",id:e};t.serverService.send(r,o)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("GetCiEntryPointSettingCommand",i)}}}),System.register("server.component",["@angular/core","@angular/router","models/ciServer","commands/get-builddefinitions.command","commands/get-cientrypointsetting.command"],function(e,t){"use strict";{var n,o,r,i,s,c;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){c=function(){function e(e,t,n,o){this.getBuildDefinitionsCommand=e,this.getCiEntryPointSettingCommand=t,this.route=n,this.router=o,this.ciServer=new r.CiServer,this.loadingProjects=!1,this.errorMessage=null}return e.prototype.ngOnInit=function(){var e=this;this.sub=this.route.params.subscribe(function(t){var n=+t.id;n&&e.getCiEntryPointSettingCommand.invoke(n).then(function(t){e.ciServer.url=t.url})})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.getProjects=function(){var e=this;this.loadingProjects=!0,this.getBuildDefinitionsCommand.getBuildDefinitions(this.ciServer).then(function(t){e.projects=t},function(t){e.errorMessage=t}).then(function(){e.loadingProjects=!1})},e.prototype.onSave=function(){this.projects.forEach(function(e){e.selected&&alert("you selected "+e.name)})},e=__decorate([n.Component({templateUrl:"./components/server.html"}),__metadata("design:paramtypes",[i.GetBuildDefinitionsCommand,s.GetCiEntryPointSettingCommand,o.ActivatedRoute,o.Router])],e)}(),e("Server",c)}}}),System.register("app.routes",["@angular/router","show-off.component","home.component","server.component"],function(e,t){"use strict";{var n,o,r,i,s,c;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e}],execute:function(){e("routes",s=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:r.Home},{path:"showoff",component:o.ShowOff},{path:"server",component:i.Server},{path:"server/:id",component:i.Server}]),e("APP_ROUTER_PROVIDERS",c=[n.provideRouter(s)])}}}),System.register("commands/get-cientrypointsettings.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"getCiEntryPointSettings"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.execute=function(){var e=this;return new Promise(function(t,n){e.response=function(e){200===e.responseCode?t(e.result):n(e.result)};var o={type:"getCiEntryPointSettings"};e.serverService.send(o,n)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("GetCiEntryPointSettingsCommand",i)}}}),System.register("app",["@angular/core","@angular/router","server.service","commands/echo.command","commands/get-builddefinitions.command","commands/get-siren-info.command","commands/get-cientrypointsettings.command","commands/get-cientrypointsetting.command"],function(e,t){"use strict";{var n,o,r,i,s,c,a,u,m;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){c=e},function(e){a=e},function(e){u=e}],execute:function(){m=function(){function e(e,t){var n=this;this.serverService=e,this.getCiEntryPointSettingsCommand=t,this.webSocketsConnecting=!0,this.webSocketsError=null,this.isDeviceConnected=null,e.connected.subscribe(function(){return n.onServerConnected()}),e.connectionError.subscribe(function(e){n.webSocketsConnecting=!1,n.webSocketsError=e}),e.deviceConnectionChanged.subscribe(function(e){return n.isDeviceConnected=e})}return e.prototype.onServerConnected=function(){var e=this;this.webSocketsConnecting=!1,this.webSocketsError=null,this.getCiEntryPointSettingsCommand.execute().then(function(t){return e.ciEntryPointSettings=t})},e=__decorate([n.Component({selector:"my-app",templateUrl:"components/app.html",providers:[r.ServerService,i.EchoCommand,s.GetBuildDefinitionsCommand,c.GetSirenInfoCommand,a.GetCiEntryPointSettingsCommand,u.GetCiEntryPointSettingCommand],directives:[o.ROUTER_DIRECTIVES]}),__metadata("design:paramtypes",[r.ServerService,a.GetCiEntryPointSettingsCommand])],e)}(),e("AppComponent",m)}}}),System.register("boot",["@angular/platform-browser-dynamic","@angular/forms","app","app.routes"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e}],execute:function(){n.bootstrap(r.AppComponent,[i.APP_ROUTER_PROVIDERS,o.disableDeprecatedForms(),o.provideForms()])["catch"](function(e){return console.error(e)})}}});