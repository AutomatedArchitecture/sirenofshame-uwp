var __decorate=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=3>i?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(3>i?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};System.register("commands/base.command",[],function(e,t){"use strict";{var n;t&&t.id}return{setters:[],execute:function(){n=function(){function e(e){this.serverService=e}return Object.defineProperty(e.prototype,"type",{get:function(){return null},enumerable:!0,configurable:!0}),e}(),e("BaseCommand",n)}}}),System.register("models/myBuildDefinition",[],function(e,t){"use strict";{var n;t&&t.id}return{setters:[],execute:function(){n=function(){function e(){}return e}(),e("MyBuildDefinition",n)}}}),System.register("models/ciEntryPointSetting",[],function(e,t){"use strict";{var n;t&&t.id}return{setters:[],execute:function(){n=function(){function e(){}return e}(),e("CiEntryPointSetting",n)}}}),System.register("server.service",["@angular/core"],function(e,t){"use strict";{var n,o;t&&t.id}return{setters:[function(e){n=e}],execute:function(){o=function(){function e(){this.commands=[],this.connected=new n.EventEmitter(!0),this.connectionError=new n.EventEmitter(!0),this.deviceConnectionChanged=new n.EventEmitter(!0),this.serverAdded=new n.EventEmitter(!0),this.isConnected=!1,"WebSocket"in window?this.connectToServer():this.connectionError.emit("This browser does not support websockets")}return e.prototype.registerCommand=function(e){this.commands.push(e)},e.prototype.connectToServer=function(){var e=this,t=this.getUrl(),n=new WebSocket(t,["echo"]);n.onopen=function(){e.isConnected=!0,e.ws=n,e.ws.onmessage=function(t){var n=JSON.parse(t.data);e.commands.forEach(function(e){return e.type===n.type?void e.response(n):void 0}),"deviceConnectionChanged"===n.type&&(200===n.responseCode?e.deviceConnectionChanged.emit(n.result):console.error(n.result))},e.connected.emit(null)},n.onerror=function(){e.isConnected=!1,e.connectionError.emit("Error connecting via websockets.")},n.onclose=function(){e.isConnected=!1,e.connectionError.emit("Lost connection to server, attempting to reconnect."),e.connectToServer()}},e.prototype.getUrl=function(){var e=":8001",t=location.hostname;return"ws://"+t+e+"/sockets/"},e.prototype.send=function(e,t){var n=this;if(this.ws&&this.isConnected)this.ws.send(JSON.stringify(e));else var o=this.connected.subscribe(function(){n.ws.send(JSON.stringify(e)),o.unsubscribe()})},__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],e.prototype,"connected",void 0),__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],e.prototype,"connectionError",void 0),__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],e.prototype,"deviceConnectionChanged",void 0),__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],e.prototype,"serverAdded",void 0),e=__decorate([n.Injectable(),__metadata("design:paramtypes",[])],e)}(),e("ServerService",o)}}}),System.register("commands/echo.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"echo"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.echo=function(e){var t=this;return new Promise(function(n,o){t.response=function(e){return n(e.result)};var r={type:"echo",message:e};t.serverService.send(r,o)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("EchoCommand",i)}}}),System.register("commands/get-builddefinitions.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"getBuildDefinitions"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.getBuildDefinitions=function(e){var t=this;return new Promise(function(n,o){t.response=function(e){200===e.responseCode?n(e.result):o(e.result)};var r={type:"getBuildDefinitions",ciServer:e};t.serverService.send(r,o)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("GetBuildDefinitionsCommand",i)}}}),System.register("models/sirenInfo",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("commands/get-siren-info.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"getSirenInfo"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.getSirenInfo=function(){var e=this;return new Promise(function(t,n){e.response=function(e){return t(e.result)};var o={type:"getSirenInfo"};e.serverService.send(o,n)})},t.prototype.playLedPattern=function(e){var t={type:"playLedPattern",id:e};this.serverService.send(t)},t.prototype.playAudioPattern=function(e){var t={type:"playAudioPattern",id:e};this.serverService.send(t)},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("GetSirenInfoCommand",i)}}}),System.register("commands/get-cientrypointsettings.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"getCiEntryPointSettings"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.execute=function(){var e=this;return new Promise(function(t,n){e.response=function(e){200===e.responseCode?t(e.result):n(e.result)};var o={type:"getCiEntryPointSettings"};e.serverService.send(o,n)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("GetCiEntryPointSettingsCommand",i)}}}),System.register("commands/get-cientrypointsetting.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"getCiEntryPointSetting"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.invoke=function(e){var t=this;return new Promise(function(n,o){t.response=function(e){200===e.responseCode?n(e.result):o(e.result)};var r={type:"getCiEntryPointSetting",id:e};t.serverService.send(r,o)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("GetCiEntryPointSettingCommand",i)}}}),System.register("commands/add-cientrypointsetting.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"addCiEntryPointSetting"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.invoke=function(e){var t=this;return new Promise(function(n,o){t.response=function(e){200===e.responseCode?n(e.result):o(e.result)};var r={type:"addCiEntryPointSetting",ciEntryPointSetting:e};t.serverService.send(r,o)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("AddCiEntryPointSettingCommand",i)}}}),System.register("commands/delete-settings.command",["@angular/core","commands/base.command","server.service"],function(e,t){"use strict";{var n,o,r,i;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){i=function(e){function t(t){e.call(this,t),this.serverService=t,t.registerCommand(this)}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"delete-settings"},enumerable:!0,configurable:!0}),t.prototype.response=function(e){},t.prototype.execute=function(){var e=this;return new Promise(function(t,n){e.response=function(e){return t(e.result)};var o={type:e.type};e.serverService.send(o,n)})},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[r.ServerService])],t)}(o.BaseCommand),e("DeleteSettingsCommand",i)}}}),System.register("app",["@angular/core","server.service","commands/echo.command","commands/get-builddefinitions.command","commands/get-siren-info.command","commands/get-cientrypointsettings.command","commands/get-cientrypointsetting.command","commands/add-cientrypointsetting.command","commands/delete-settings.command"],function(e,t){"use strict";{var n,o,r,i,s,c,a,u,d,m;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){c=e},function(e){a=e},function(e){u=e},function(e){d=e}],execute:function(){m=function(){function e(e,t){var n=this;this.serverService=e,this.getCiEntryPointSettingsCommand=t,this.webSocketsConnecting=!0,this.webSocketsError=null,this.isDeviceConnected=null,e.connected.subscribe(function(){return n.onServerConnected()}),e.serverAdded.subscribe(function(e){return n.onServerAdded(e)}),e.connectionError.subscribe(function(e){n.webSocketsConnecting=!1,n.webSocketsError=e}),e.deviceConnectionChanged.subscribe(function(e){return n.isDeviceConnected=e})}return e.prototype.onServerConnected=function(){var e=this;this.webSocketsConnecting=!1,this.webSocketsError=null,this.getCiEntryPointSettingsCommand.execute().then(function(t){return e.ciEntryPointSettings=t})},e.prototype.onServerAdded=function(e){this.ciEntryPointSettings.push(e)},e=__decorate([n.Component({selector:"my-app",templateUrl:"components/app.html",providers:[o.ServerService,r.EchoCommand,i.GetBuildDefinitionsCommand,s.GetSirenInfoCommand,c.GetCiEntryPointSettingsCommand,a.GetCiEntryPointSettingCommand,u.AddCiEntryPointSettingCommand,d.DeleteSettingsCommand]}),__metadata("design:paramtypes",[o.ServerService,c.GetCiEntryPointSettingsCommand])],e)}(),e("AppComponent",m)}}}),System.register("show-off.component",["@angular/core","rxjs/add/operator/toPromise","commands/get-siren-info.command"],function(e,t){"use strict";{var n,o,r;t&&t.id}return{setters:[function(e){n=e},function(e){},function(e){o=e}],execute:function(){r=function(){function e(e){var t=this;this.getSirenInfoCommand=e,e.getSirenInfo().then(function(e){t.ledPatterns=e.ledPatterns,t.audioPatterns=e.audioPatterns})}return e.prototype.playLights=function(e){this.getSirenInfoCommand.playLedPattern(e)},e.prototype.stopLights=function(){this.getSirenInfoCommand.playLedPattern(null)},e.prototype.playAudio=function(e){this.getSirenInfoCommand.playAudioPattern(e)},e.prototype.stopAudio=function(){this.getSirenInfoCommand.playAudioPattern(null)},e=__decorate([n.Component({template:'\n<h1>Show Off</h1>\n<form class="form-horizontal">\n    <div class="form-group">\n        <label for="ledPattern" class="col-sm-2 control-label">LED Pattern</label>\n        <div class="col-sm-10">\n            <select id="ledPattern" class="form-control" #selectedLedPattern>\n                <option *ngFor="let pattern of ledPatterns" [value]="pattern.id">{{pattern.name}}</option>\n            </select>\n        </div>\n    </div>\n    <div class="form-group">\n        <div class="col-sm-offset-2 col-sm-10">\n            <button type="submit" class="btn btn-primary" (click)="playLights(selectedLedPattern.value)">Play Lights</button>\n            <button type="submit" class="btn btn-primary" (click)="stopLights()">Stop Lights</button>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="audioPattern" class="col-sm-2 control-label">Audio Pattern</label>\n        <div class="col-sm-10">\n            <select id="audioPattern" class="form-control">\n                <option *ngFor="let pattern of audioPatterns" [value]="pattern.id">{{pattern.name}}</option>\n            </select>\n        </div>\n    </div>\n    <div class="form-group">\n        <div class="col-sm-offset-2 col-sm-10">\n            <button type="submit" class="btn btn-primary" (click)="playAudio(selectedLedPattern.value)">Play Audio</button>\n            <button type="submit" class="btn btn-primary" (click)="stopAudio()">Stop Audio</button>\n        </div>\n    </div>\n</form>\n'}),__metadata("design:paramtypes",[o.GetSirenInfoCommand])],e)}(),e("ShowOff",r)}}}),System.register("home.component",["@angular/core","commands/echo.command"],function(e,t){"use strict";{var n,o,r;t&&t.id}return{setters:[function(e){n=e},function(e){o=e}],execute:function(){r=function(){function e(e){this.echoCommand=e}return e.prototype.onButtonClick=function(){var e=this;this.echoCommand.echo(this.message).then(function(t){return e.messages+=t},function(e){return alert(e)})},e.prototype.ngOnInit=function(){this.messages=""},e=__decorate([n.Component({template:'\n    <h1>Siren of Shame</h1>\n    <h2>Messages</h2>\n    <div>{{messages}}</div>\n    <h2>Send</h2>\n    <input type="text" [(ngModel)]="message" />\n    <button type="submit" (click)="onButtonClick()">Send</button>\n'}),__metadata("design:paramtypes",[o.EchoCommand])],e)}(),e("Home",r)}}}),System.register("server.component",["@angular/core","@angular/router","models/ciEntryPointSetting","commands/get-builddefinitions.command","commands/get-cientrypointsetting.command","commands/add-cientrypointsetting.command","server.service"],function(e,t){"use strict";{var n,o,r,i,s,c,a,u;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){c=e},function(e){a=e}],execute:function(){u=function(){function e(e,t,n,o,i,s){this.getBuildDefinitionsCommand=e,this.getCiEntryPointSettingCommand=t,this.addCiEntryPointSettingCommand=n,this.route=o,this.router=i,this.serverService=s,this.ciEntryPointSetting=new r.CiEntryPointSetting,this.loadingProjects=!1,this.errorMessage=null}return e.prototype.ngOnInit=function(){var e=this;this.sub=this.route.params.subscribe(function(t){var n=+t.id;n&&e.getCiEntryPointSettingCommand.invoke(n).then(function(t){e.ciEntryPointSetting.id=t.id,e.ciEntryPointSetting.name=t.name,e.ciEntryPointSetting.url=t.url})})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.getProjects=function(){var e=this;this.loadingProjects=!0,this.getBuildDefinitionsCommand.getBuildDefinitions(this.ciEntryPointSetting).then(function(t){e.ciEntryPointSetting.projects=t},function(t){e.errorMessage=t}).then(function(){e.loadingProjects=!1})},e.prototype.onSave=function(){var e=this;this.ciEntryPointSetting.buildDefinitionSettings=this.ciEntryPointSetting.projects.filter(function(e){return e.selected}),this.addCiEntryPointSettingCommand.invoke(this.ciEntryPointSetting).then(function(t){var n=0===e.ciEntryPointSetting.id;n&&(e.ciEntryPointSetting.id=t,e.serverService.serverAdded.emit(e.ciEntryPointSetting)),e.router.navigate(["home"])})},e=__decorate([n.Component({templateUrl:"./components/server.html"}),__metadata("design:paramtypes",[i.GetBuildDefinitionsCommand,s.GetCiEntryPointSettingCommand,c.AddCiEntryPointSettingCommand,o.ActivatedRoute,o.Router,a.ServerService])],e)}(),e("Server",u)}}}),System.register("settings.component",["@angular/core","commands/delete-settings.command"],function(e,t){"use strict";{var n,o,r;t&&t.id}return{setters:[function(e){n=e},function(e){o=e}],execute:function(){r=function(){function e(e){this.deleteSettingsCommand=e}return e.prototype.deleteConfig=function(){confirm("Are you 100% sure?")&&this.deleteSettingsCommand.execute().then(function(){alert("settings deleted")})},e=__decorate([n.Component({template:'\n<h1>Settings</h1>\n<button type="button" class="btn btn-danger" (click)="deleteConfig()">Delete Config</button>\n'}),__metadata("design:paramtypes",[o.DeleteSettingsCommand])],e)}(),e("Settings",r)}}}),System.register("app.routes",["@angular/core","@angular/router","show-off.component","home.component","server.component","settings.component"],function(e,t){"use strict";{var n,o,r,i,s,c,a,u;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){c=e}],execute:function(){a=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:i.Home},{path:"showoff",component:r.ShowOff},{path:"server",component:s.Server},{path:"server/:id",component:s.Server},{path:"settings",component:c.Settings}],u=function(){function e(){}return e=__decorate([n.NgModule({imports:[o.RouterModule.forRoot(a)],exports:[o.RouterModule]}),__metadata("design:paramtypes",[])],e)}(),e("AppRoutingModule",u)}}}),System.register("app.module",["@angular/core","@angular/platform-browser","@angular/forms","app","app.routes","home.component","show-off.component","server.component","settings.component"],function(e,t){"use strict";{var n,o,r,i,s,c,a,u,d,m;t&&t.id}return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){c=e},function(e){a=e},function(e){u=e},function(e){d=e}],execute:function(){m=function(){function e(){}return e=__decorate([n.NgModule({imports:[o.BrowserModule,s.AppRoutingModule,r.FormsModule],declarations:[i.AppComponent,c.Home,a.ShowOff,u.Server,d.Settings],bootstrap:[i.AppComponent]}),__metadata("design:paramtypes",[])],e)}(),e("AppModule",m)}}}),System.register("boot",["@angular/platform-browser-dynamic","app.module"],function(e,t){"use strict";{var n,o;t&&t.id}return{setters:[function(e){n=e},function(e){o=e}],execute:function(){n.platformBrowserDynamic().bootstrapModule(o.AppModule)}}});